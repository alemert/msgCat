/******************************************************************************/
/* change title on for new project                                            */
/******************************************************************************/

/******************************************************************************/
/*   I N C L U D E S                                                          */
/******************************************************************************/

// ---------------------------------------------------------
// system
// ---------------------------------------------------------

// ---------------------------------------------------------
// own 
// ---------------------------------------------------------
#include "main.h"
#include "catalog.h"

/******************************************************************************/
/*   D E F I N E S                                                            */
/******************************************************************************/

/******************************************************************************/
/*   M A C R O S                                                              */
/******************************************************************************/

/******************************************************************************/
/*   P R O T O T Y P E S                                                      */
/******************************************************************************/
void printAllMsg( tMsgItem *anchor ) ;
void printMsg( tMsgItem *p ) ;

/******************************************************************************/
/*                                                                            */
/*                                  M A I N                                   */
/*                                                                            */
/******************************************************************************/
#ifndef __TDD__

int main(int argc, const char* argv[] )
{
  tMsgItem *anchor ;

  int sysRc = 0 ;

  sysRc = handleCmdLn( argc, argv ) ;
  if( sysRc != 0 ) goto _door ;

  anchor = buildCatalog() ;

  if( ! getFlagAttr( "all" ) )
  {
    printAllMsg( anchor ) ;
    goto _door ;
  } 
  

_door :

  return sysRc ;
}

#endif

/******************************************************************************/
/*                                                                            */
/*   F U N C T I O N S                                                        */
/*                                                                            */
/******************************************************************************/
void printAllMsg( tMsgItem *anchor )
{
  tMsgItem *p ;

  p = anchor->next ;

  while( p->next != NULL )
  {
    printMsg( p ) ; 
    p = p->next ;
  }
}

void printMsg( tMsgItem *p ) 
{
  printf("%05d %-4s %-15s %3s %s\n", p->id, p->class, p->define, p->lev, p->txt ) ;

}
